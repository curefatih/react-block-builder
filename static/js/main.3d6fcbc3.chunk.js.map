{"version":3,"sources":["../../src/components/DragableBlock/DragableBlock.tsx","../../src/components/Block/Block.tsx","../../src/components/BlockWrapper/BlockWrapper.tsx","App.tsx","index.tsx"],"names":["DragableBlock","props","mouseDown","x","y","offsetX","offsetY","mouseOffsetX","mouseOffsetY","el","React","current","setPos","offsetTop","className","styles","undragableBlock","onMouseMove","e","pos","style","position","left","top","zIndex","border","onMouseDown","onMouseUp","head","rounded","content","foot","Block","rest","BlockContext","BlockWrapper","blockEl","handleResize","block","rect","window","value","ref","blockStyle","App","margin","height","width","allowInner","parentPos","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3d6fcbc3.chunk.js","sourcesContent":["import * as React from 'react';\nimport styles from './styles.module.css';\n\nexport interface BlockProps extends React.HTMLAttributes<HTMLDivElement> {\n  head: string;\n  foot?: string;\n  allowInner?: boolean;\n  parentPos: DOMRect;\n  children: React.ReactChildren | Function | any\n}\n\nexport const DragableBlock: React.SFC<BlockProps> = (props: BlockProps) => {\n  const [pos, setPos] = React.useState({\n    mouseDown: false,\n    x: 0,\n    y: 0,\n    offsetX: 0,\n    offsetY: 0,\n    mouseOffsetX: 0,\n    mouseOffsetY: 0,\n  });\n\n\n  const el = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (el.current) {\n      const current = el.current;\n\n      setPos({\n        ...pos,\n        x: props.parentPos.x + (props.parentPos.width / 2),\n        y: props.parentPos.y + (props.parentPos.height / 2),\n        offsetX: current.offsetLeft,\n        offsetY: current.offsetTop,\n      })\n    }\n  }, [])\n\n\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // @ts-ignore\n    const current = e.target.getBoundingClientRect()\n\n    setPos({\n      ...pos,\n      mouseDown: true,\n      mouseOffsetX: e.clientX - current.left,\n      mouseOffsetY: e.clientY - current.top\n    })\n  }\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\n    if (pos.mouseDown) {\n\n      // @ts-ignore\n      const current = e.target.getBoundingClientRect()\n\n      setPos({\n        ...pos,\n        x: e.clientX - pos.mouseOffsetX - props.parentPos.x,\n        y: e.clientY - pos.mouseOffsetY - props.parentPos.y\n      })\n    }\n  }\n\n  const handleMouseUp = () => {\n    setPos({\n      ...pos,\n      mouseDown: false\n    })\n  }\n\n  return (\n    <div\n      className={styles.undragableBlock}\n      onMouseMove={handleMouseMove}\n      style={{\n        position: \"absolute\",\n        left: `${pos.x}px`,\n        top: `${pos.y}px`,\n        zIndex: pos.mouseDown ? 9999 : \"auto\",\n        border: pos.mouseDown ? \"1px solid #0984e3\" : undefined,\n        ...props.style\n      }}\n    >\n      <div\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        className={`${styles.head} ${!props.allowInner && styles.rounded}`}\n      >\n        {props.head}\n      </div>\n      {\n        props.allowInner && (\n          <React.Fragment>\n            <div className={styles.content}>\n              {props.children}\n            </div>\n            <div className={styles.foot}>\n              {props.foot}\n            </div>\n          </React.Fragment>\n        )\n      }\n    </div >\n  );\n};\n","import * as React from 'react';\nimport styles from './styles.module.css';\n\nexport interface BlockProps extends React.HTMLAttributes<HTMLDivElement> {\n  head: string;\n  foot?: string;\n  allowInner?: boolean;\n}\n\nexport const Block: React.SFC<BlockProps> = (props: BlockProps) => {\n\n  const {\n    children,\n    head,\n    foot,\n    allowInner,\n    ...rest\n  } = props;\n\n  return (\n    <div\n      className={styles.block}\n      style={{\n        position: \"relative\",\n      }}\n      {...rest}\n    >\n      <div\n        className={`${styles.head}`}\n      >\n        {head}\n      </div>\n      {\n        props.allowInner && (\n          <React.Fragment>\n            <div className={styles.content}>\n              {children}\n            </div>\n            <div className={styles.foot}>\n              {foot}\n            </div>\n          </React.Fragment>\n        )\n      }\n    </div >\n  );\n}\n","import * as React from 'react'\nimport styles from './styles.module.css'\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  blockStyle?: React.CSSProperties,\n  // Here i used Function as type but probably wrong\n  children: Function\n}\n\n// idk, its necessary to give context but might need\nexport const BlockContext = React.createContext<any>(null);\n\nexport const BlockWrapper = (props: Props) => {\n  const [pos, setPos] = React.useState({} as DOMRect);\n  const blockEl = React.useRef<HTMLDivElement>(null);\n\n  const handleResize = () => {\n    if (blockEl.current) {\n\n      const block = blockEl.current;\n\n      block.style.width = block.parentElement?.style.width || \"inherit\";\n      block.style.height = block.parentElement?.style.height || \"inherit\";\n\n      const rect = block.getBoundingClientRect();\n      setPos(rect);\n    }\n  }\n\n  React.useEffect(() => {\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    }\n  }, [])\n\n  return (\n    <BlockContext.Provider value={pos}>\n      <div ref={blockEl} className={styles.blockBuilder} style={props.blockStyle}>\n        {props.children(pos)}\n      </div>\n    </BlockContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { Block, BlockWrapper, DragableBlock } from 'block-builder'\nimport 'block-builder/dist/index.css'\n\nconst App = () => {\n  return (\n    <div style={{ margin: \"0 auto\", height: \"500px\", width: \"500px\" }}>\n      <BlockWrapper\n        blockStyle={{\n          height: \"100px\",\n          border: \"1px solid #333\"\n        }}\n      >\n        {(value: DOMRect) =>\n          <>\n            Your components\n            <DragableBlock head=\"Heading\" allowInner parentPos={value} style={{ width: 300 }}>\n              inner components\n              <Block head=\"Allowing content\" allowInner style={{ width: \"100%\" }}>components</Block>\n              <Block head=\"I am not allowing content\" style={{ width: \"100%\" }}>components</Block>\n            </DragableBlock>\n            <DragableBlock head=\"Heading\" allowInner parentPos={value} style={{ width: 300 }}>\n              components\n            </DragableBlock>\n          </>\n        }\n      </BlockWrapper>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}